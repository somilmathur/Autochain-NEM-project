{"version":3,"sources":["../../src/utils/serialization.js"],"names":["_serializeSafeString","str","r","ArrayBuffer","d","Uint32Array","b","Uint8Array","e","length","j","charCodeAt","_serializeUaString","_serializeLong","value","Math","floor","_serializeMosaicId","mosaicId","serializedNamespaceId","namespaceId","serializedName","name","_serializeMosaicAndQuantity","mosaic","serializedMosaicId","serializedQuantity","quantity","_serializeMosaics","entity","i","temporary","push","Format","mosaicIdToName","sort","a","serializedMosaic","k","_serializeProperty","serializedValue","_serializeProperties","helper","serializedProperty","_serializeLevy","temp","serializedFee","_serializeMosaicDefinition","convert","hex2ua","id","utf8ToUa","utf8ToHex","levy","serializeTransaction","TransactionTypes","transfer","entityVersion","provisionNamespace","mosaicDefinition","mosaicSupply","serializeSupplyType","serializedDelta","multisigSignature","multisigTransaction","multisigModification","key2bytes","toString","importanceTransfer","module","exports"],"mappings":"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","file":"serialization.js","sourcesContent":["import convert from './convert';\nimport Format from './format';\nimport TransactionTypes from '../model/transactionTypes';\n\n/***\n * NOTE, related to serialization: Unfortunately we need to create few objects\n * and do a bit of copying, as Uint32Array does not allow random offsets\n */\n\n/* safe string - each char is 8 bit */\nlet _serializeSafeString = function(str) {\n    var r = new ArrayBuffer(132);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n\n    var e = 4;\n    if (str === null) {\n        d[0] = 0xffffffff;\n\n    } else {\n        d[0] = str.length;\n        for (var j = 0; j < str.length; ++j) {\n            b[e++] = str.charCodeAt(j);\n        }\n    }\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeUaString = function(str) {\n    var r = new ArrayBuffer(516);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n\n    var e = 4;\n    if (str === null) {\n        d[0] = 0xffffffff;\n\n    } else {\n        d[0] = str.length;\n        for (var j = 0; j < str.length; ++j) {\n            b[e++] = str[j];\n        }\n    }\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeLong = function(value) {\n    var r = new ArrayBuffer(8);\n    var d = new Uint32Array(r);\n    d[0] = value;\n    d[1] = Math.floor((value / 0x100000000));\n    return new Uint8Array(r, 0, 8);\n};\n\nlet _serializeMosaicId = function(mosaicId) {\n    var r = new ArrayBuffer(264);\n    var serializedNamespaceId = _serializeSafeString(mosaicId.namespaceId);\n    var serializedName = _serializeSafeString(mosaicId.name);\n\n    var b = new Uint8Array(r);\n    var d = new Uint32Array(r);\n    d[0] = serializedNamespaceId.length + serializedName.length;\n    var e = 4;\n    for (var j = 0; j < serializedNamespaceId.length; ++j) {\n        b[e++] = serializedNamespaceId[j];\n    }\n    for (var j = 0; j < serializedName.length; ++j) {\n        b[e++] = serializedName[j];\n    }\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeMosaicAndQuantity = function(mosaic) {\n    var r = new ArrayBuffer(4 + 264 + 8);\n    var serializedMosaicId = _serializeMosaicId(mosaic.mosaicId);\n    var serializedQuantity = _serializeLong(mosaic.quantity);\n\n    //$log.info(convert.ua2hex(serializedQuantity), serializedMosaicId, serializedQuantity);\n\n    var b = new Uint8Array(r);\n    var d = new Uint32Array(r);\n    d[0] = serializedMosaicId.length + serializedQuantity.length;\n    var e = 4;\n    for (var j = 0; j < serializedMosaicId.length; ++j) {\n        b[e++] = serializedMosaicId[j];\n    }\n    for (var j = 0; j < serializedQuantity.length; ++j) {\n        b[e++] = serializedQuantity[j];\n    }\n    return new Uint8Array(r, 0, e);\n};\nlet _serializeMosaics = function(entity) {\n    var r = new ArrayBuffer(276 * 10 + 4);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n\n    var i = 0;\n    var e = 0;\n\n    d[i++] = entity.length;\n    e += 4;\n\n    var temporary = [];\n    for (var j = 0; j < entity.length; ++j) {\n        temporary.push({\n            'entity': entity[j],\n            'value': Format.mosaicIdToName(entity[j].mosaicId) + \" : \" + entity[j].quantity\n        })\n    }\n    temporary.sort(function(a, b) {\n        return a.value < b.value ? -1 : a.value > b.value;\n    });\n\n    for (var j = 0; j < temporary.length; ++j) {\n        var entity = temporary[j].entity;\n        var serializedMosaic = _serializeMosaicAndQuantity(entity);\n        for (var k = 0; k < serializedMosaic.length; ++k) {\n            b[e++] = serializedMosaic[k];\n        }\n    }\n\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeProperty = function(entity) {\n    var r = new ArrayBuffer(1024);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n    var serializedName = _serializeSafeString(entity['name']);\n    var serializedValue = _serializeSafeString(entity['value']);\n    d[0] = serializedName.length + serializedValue.length;\n    var e = 4;\n    for (var j = 0; j < serializedName.length; ++j) {\n        b[e++] = serializedName[j];\n    }\n    for (var j = 0; j < serializedValue.length; ++j) {\n        b[e++] = serializedValue[j];\n    }\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeProperties = function(entity) {\n    var r = new ArrayBuffer(1024);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n\n    var i = 0;\n    var e = 0;\n\n    d[i++] = entity.length;\n    e += 4;\n\n    var temporary = entity;\n\n    var temporary = [];\n    for (var j = 0; j < entity.length; ++j) {\n        temporary.push(entity[j]);\n    }\n\n    var helper = {\n        'divisibility': 1,\n        'initialSupply': 2,\n        'supplyMutable': 3,\n        'transferable': 4\n    };\n    temporary.sort(function(a, b) {\n        return helper[a.name] < helper[b.name] ? -1 : helper[a.name] > helper[b.name];\n    });\n\n    for (var j = 0; j < temporary.length; ++j) {\n        var entity = temporary[j];\n        var serializedProperty = _serializeProperty(entity);\n        for (var k = 0; k < serializedProperty.length; ++k) {\n            b[e++] = serializedProperty[k];\n        }\n    }\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeLevy = function(entity) {\n    var r = new ArrayBuffer(1024);\n    var d = new Uint32Array(r);\n\n    if (entity === null) {\n        d[0] = 0;\n        return new Uint8Array(r, 0, 4);\n    }\n\n    var b = new Uint8Array(r);\n    d[1] = entity['type'];\n\n    var e = 8;\n    var temp = _serializeSafeString(entity['recipient']);\n    for (var j = 0; j < temp.length; ++j) {\n        b[e++] = temp[j];\n    }\n\n    var serializedMosaicId = _serializeMosaicId(entity['mosaicId']);\n    for (var j = 0; j < serializedMosaicId.length; ++j) {\n        b[e++] = serializedMosaicId[j];\n    }\n\n    var serializedFee = _serializeLong(entity['fee']);\n    for (var j = 0; j < serializedFee.length; ++j) {\n        b[e++] = serializedFee[j];\n    }\n\n    d[0] = 4 + temp.length + serializedMosaicId.length + 8;\n\n    return new Uint8Array(r, 0, e);\n};\n\nlet _serializeMosaicDefinition = function(entity) {\n    var r = new ArrayBuffer(40 + 264 + 516 + 1024 + 1024);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n\n    var temp = convert.hex2ua(entity['creator']);\n    d[0] = temp.length;\n    var e = 4;\n    for (var j = 0; j < temp.length; ++j) {\n        b[e++] = temp[j];\n    }\n\n    var serializedMosaicId = _serializeMosaicId(entity.id);\n    for (var j = 0; j < serializedMosaicId.length; ++j) {\n        b[e++] = serializedMosaicId[j];\n    }\n\n    var utf8ToUa = convert.hex2ua(convert.utf8ToHex(entity['description']));\n    var temp = _serializeUaString(utf8ToUa);\n    for (var j = 0; j < temp.length; ++j) {\n        b[e++] = temp[j];\n    }\n\n    var temp = _serializeProperties(entity['properties']);\n    for (var j = 0; j < temp.length; ++j) {\n        b[e++] = temp[j];\n    }\n\n    var levy = _serializeLevy(entity['levy']);\n    for (var j = 0; j < levy.length; ++j) {\n        b[e++] = levy[j];\n    }\n    return new Uint8Array(r, 0, e);\n};\n\n/**\n * Serialize a transaction object\n *\n * @param {object} entity - A transaction object\n *\n * @return {Uint8Array} - The serialized transaction\n */\nlet serializeTransaction = function(entity) {\n    var r = new ArrayBuffer(512 + 2764);\n    var d = new Uint32Array(r);\n    var b = new Uint8Array(r);\n    d[0] = entity['type'];\n    d[1] = entity['version'];\n    d[2] = entity['timeStamp'];\n\n    var temp = convert.hex2ua(entity['signer']);\n    d[3] = temp.length;\n    var e = 16;\n    for (var j = 0; j < temp.length; ++j) {\n        b[e++] = temp[j];\n    }\n\n    // Transaction\n    var i = e / 4;\n    d[i++] = entity['fee'];\n    d[i++] = Math.floor((entity['fee'] / 0x100000000));\n    d[i++] = entity['deadline'];\n    e += 12;\n\n    // TransferTransaction\n    if (d[0] === TransactionTypes.transfer) {\n        d[i++] = entity['recipient'].length;\n        e += 4;\n        // TODO: check that entity['recipient'].length is always 40 bytes\n        for (var j = 0; j < entity['recipient'].length; ++j) {\n            b[e++] = entity['recipient'].charCodeAt(j);\n        }\n        i = e / 4;\n        d[i++] = entity['amount'];\n        d[i++] = Math.floor((entity['amount'] / 0x100000000));\n        e += 8;\n\n        if (entity['message']['type'] === 1 || entity['message']['type'] === 2) {\n            var temp = convert.hex2ua(entity['message']['payload']);\n            if (temp.length === 0) {\n                d[i++] = 0;\n                e += 4;\n            } else {\n                // length of a message object\n                d[i++] = 8 + temp.length;\n                // object itself\n                d[i++] = entity['message']['type'];\n                d[i++] = temp.length;\n                e += 12;\n                for (var j = 0; j < temp.length; ++j) {\n                    b[e++] = temp[j];\n                }\n            }\n        }\n\n        var entityVersion = d[1] & 0xffffff;\n        if (entityVersion >= 2) {\n            var temp = _serializeMosaics(entity['mosaics']);\n            for (var j = 0; j < temp.length; ++j) {\n                b[e++] = temp[j];\n            }\n        }\n\n        // Provision Namespace transaction\n    } else if (d[0] === TransactionTypes.provisionNamespace) {\n        d[i++] = entity['rentalFeeSink'].length;\n        e += 4;\n        // TODO: check that entity['rentalFeeSink'].length is always 40 bytes\n        for (var j = 0; j < entity['rentalFeeSink'].length; ++j) {\n            b[e++] = entity['rentalFeeSink'].charCodeAt(j);\n        }\n        i = e / 4;\n        d[i++] = entity['rentalFee'];\n        d[i++] = Math.floor((entity['rentalFee'] / 0x100000000));\n        e += 8;\n\n        var temp = _serializeSafeString(entity['newPart']);\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        var temp = _serializeSafeString(entity['parent']);\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        // Mosaic Definition Creation transaction\n    } else if (d[0] === TransactionTypes.mosaicDefinition) {\n        var temp = _serializeMosaicDefinition(entity['mosaicDefinition']);\n        d[i++] = temp.length;\n        e += 4;\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        temp = _serializeSafeString(entity['creationFeeSink']);\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        temp = _serializeLong(entity['creationFee']);\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        // Mosaic Supply Change transaction\n    } else if (d[0] === TransactionTypes.mosaicSupply) {\n        var serializedMosaicId = _serializeMosaicId(entity['mosaicId']);\n        for (var j = 0; j < serializedMosaicId.length; ++j) {\n            b[e++] = serializedMosaicId[j];\n        }\n\n        var temp = new ArrayBuffer(4);\n        d = new Uint32Array(temp);\n        d[0] = entity['supplyType'];\n        var serializeSupplyType = new Uint8Array(temp);\n        for (var j = 0; j < serializeSupplyType.length; ++j) {\n            b[e++] = serializeSupplyType[j];\n        }\n\n        var serializedDelta = _serializeLong(entity['delta']);\n        for (var j = 0; j < serializedDelta.length; ++j) {\n            b[e++] = serializedDelta[j];\n        }\n\n        // Signature transaction\n    } else if (d[0] === TransactionTypes.multisigSignature) {\n        var temp = convert.hex2ua(entity['otherHash']['data']);\n        // length of a hash object....\n        d[i++] = 4 + temp.length;\n        // object itself\n        d[i++] = temp.length;\n        e += 8;\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n        i = e / 4;\n\n        temp = entity['otherAccount'];\n        d[i++] = temp.length;\n        e += 4;\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp.charCodeAt(j);\n        }\n\n        // Multisig wrapped transaction\n    } else if (d[0] === TransactionTypes.multisigTransaction) {\n        var temp = serializeTransaction(entity['otherTrans']);\n        d[i++] = temp.length;\n        e += 4;\n        for (var j = 0; j < temp.length; ++j) {\n            b[e++] = temp[j];\n        }\n\n        // Aggregate Modification transaction\n    } else if (d[0] === TransactionTypes.multisigModification) {\n        // Number of modifications\n        var temp = entity['modifications'];\n        d[i++] = temp.length;\n        e += 4;\n\n        for (var j = 0; j < temp.length; ++j) {\n            // Length of modification structure\n            d[i++] = 0x28;\n            e += 4;\n            // Modification type\n            if (temp[j]['modificationType'] == 1) {\n                d[i++] = 0x01;\n            } else {\n                d[i++] = 0x02;\n            }\n            e += 4;\n            // Length of public key\n            d[i++] = 0x20;\n            e += 4;\n\n            var key2bytes = convert.hex2ua(entity['modifications'][j]['cosignatoryAccount']);\n\n            // Key to Bytes\n            for (var k = 0; k < key2bytes.length; ++k) {\n                b[e++] = key2bytes[k];\n            }\n            i = e / 4;\n        }\n\n        var entityVersion = d[1] & 0xffffff;\n        if (entityVersion >= 2) {\n            d[i++] = 0x04;\n            e += 4;\n            // Relative change\n            d[i++] = entity['minCosignatories']['relativeChange'].toString(16);\n            e += 4;\n        } else {\n            // Version 1 has no modifications\n        }\n\n    } else if (d[0] === TransactionTypes.importanceTransfer) {\n        d[i++] = entity['mode'];\n        e += 4;\n        d[i++] = 0x20;\n        e += 4;\n        var key2bytes = convert.hex2ua(entity['remoteAccount']);\n\n        //Key to Bytes\n        for (var k = 0; k < key2bytes.length; ++k) {\n            b[e++] = key2bytes[k];\n        }\n    } \n\n    return new Uint8Array(r, 0, e);\n};\n\nmodule.exports = {\n    _serializeSafeString,\n    _serializeUaString,\n    _serializeLong,\n    _serializeMosaicId,\n    _serializeMosaicAndQuantity,\n    _serializeMosaics,\n    _serializeProperty,\n    _serializeProperties,\n    _serializeLevy,\n    _serializeMosaicDefinition,\n    serializeTransaction\n}"]}