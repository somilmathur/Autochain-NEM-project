{"version":3,"sources":["../../src/external/stomp.js"],"names":["Byte","Client","Frame","Stomp","__hasProp","hasOwnProperty","__slice","slice","LF","NULL","unmarshallSingle","command","headers","body","prototype","toString","lines","name","skipContentLength","value","_ref","call","push","sizeOfUTF8","join","s","encodeURI","match","length","data","chr","divider","headerLines","i","idx","len","line","start","trim","_i","_j","_len","_ref1","search","RegExp","substring","split","shift","str","replace","reverse","indexOf","parseInt","charAt","unmarshall","datas","frame","frames","last_frame","r","partial","_results","marshall","now","ws","binaryType","counter","connected","heartbeat","outgoing","incoming","maxWebSocketFrameSize","subscriptions","partialData","debug","message","window","console","log","Date","valueOf","_transmit","out","send","_setupHeartbeat","serverIncoming","serverOutgoing","ttl","v","version","VERSIONS","V1_1","V1_2","Math","max","pinger","setInterval","_this","ponger","delta","serverActivity","close","_parseConnect","args","connectCallback","errorCallback","arguments","Function","login","passcode","host","connect","apply","onmessage","evt","arr","c","client","messageID","onreceive","subscription","unmarshalledData","ArrayBuffer","Uint8Array","String","fromCharCode","server","ack","nack","onreceipt","onclose","msg","url","_cleanUp","onopen","supportedVersions","disconnect","disconnectCallback","clearInterval","destination","subscribe","callback","id","unsubscribe","begin","transaction","txid","commit","abort","V1_0","protocols","klass","WebSocketClass","WebSocket","over","exports","interval","f","self"],"mappings":"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","file":"stomp.js","sourcesContent":["// Generated by CoffeeScript 1.7.1\n\n/*\n   Stomp Over WebSocket http://www.jmesnil.net/stomp-websocket/doc/ | Apache License V2.0\n\n   Copyright (C) 2010-2013 [Jeff Mesnil](http://jmesnil.net/)\n   Copyright (C) 2012 [FuseSource, Inc.](http://fusesource.com)\n */\n\n(function() {\n  var Byte, Client, Frame, Stomp,\n    __hasProp = {}.hasOwnProperty,\n    __slice = [].slice;\n\n  Byte = {\n    LF: '\\x0A',\n    NULL: '\\x00'\n  };\n\n  Frame = (function() {\n    var unmarshallSingle;\n\n    function Frame(command, headers, body) {\n      this.command = command;\n      this.headers = headers != null ? headers : {};\n      this.body = body != null ? body : '';\n    }\n\n    Frame.prototype.toString = function() {\n      var lines, name, skipContentLength, value, _ref;\n      lines = [this.command];\n      skipContentLength = this.headers['content-length'] === false ? true : false;\n      if (skipContentLength) {\n        delete this.headers['content-length'];\n      }\n      _ref = this.headers;\n      for (name in _ref) {\n        if (!__hasProp.call(_ref, name)) continue;\n        value = _ref[name];\n        lines.push(\"\" + name + \":\" + value);\n      }\n      if (this.body && !skipContentLength) {\n        lines.push(\"content-length:\" + (Frame.sizeOfUTF8(this.body)));\n      }\n      lines.push(Byte.LF + this.body);\n      return lines.join(Byte.LF);\n    };\n\n    Frame.sizeOfUTF8 = function(s) {\n      if (s) {\n        return encodeURI(s).match(/%..|./g).length;\n      } else {\n        return 0;\n      }\n    };\n\n    unmarshallSingle = function(data) {\n      var body, chr, command, divider, headerLines, headers, i, idx, len, line, start, trim, _i, _j, _len, _ref, _ref1;\n      divider = data.search(RegExp(\"\" + Byte.LF + Byte.LF));\n      headerLines = data.substring(0, divider).split(Byte.LF);\n      command = headerLines.shift();\n      headers = {};\n      trim = function(str) {\n        return str.replace(/^\\s+|\\s+$/g, '');\n      };\n      _ref = headerLines.reverse();\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n        line = _ref[_i];\n        idx = line.indexOf(':');\n        headers[trim(line.substring(0, idx))] = trim(line.substring(idx + 1));\n      }\n      body = '';\n      start = divider + 2;\n      if (headers['content-length']) {\n        len = parseInt(headers['content-length']);\n        body = ('' + data).substring(start, start + len);\n      } else {\n        chr = null;\n        for (i = _j = start, _ref1 = data.length; start <= _ref1 ? _j < _ref1 : _j > _ref1; i = start <= _ref1 ? ++_j : --_j) {\n          chr = data.charAt(i);\n          if (chr === Byte.NULL) {\n            break;\n          }\n          body += chr;\n        }\n      }\n      return new Frame(command, headers, body);\n    };\n\n    Frame.unmarshall = function(datas) {\n      var frame, frames, last_frame, r;\n      frames = datas.split(RegExp(\"\" + Byte.NULL + Byte.LF + \"*\"));\n      r = {\n        frames: [],\n        partial: ''\n      };\n      r.frames = (function() {\n        var _i, _len, _ref, _results;\n        _ref = frames.slice(0, -1);\n        _results = [];\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n          frame = _ref[_i];\n          _results.push(unmarshallSingle(frame));\n        }\n        return _results;\n      })();\n      last_frame = frames.slice(-1)[0];\n      if (last_frame === Byte.LF || (last_frame.search(RegExp(\"\" + Byte.NULL + Byte.LF + \"*$\"))) !== -1) {\n        r.frames.push(unmarshallSingle(last_frame));\n      } else {\n        r.partial = last_frame;\n      }\n      return r;\n    };\n\n    Frame.marshall = function(command, headers, body) {\n      var frame;\n      frame = new Frame(command, headers, body);\n      return frame.toString() + Byte.NULL;\n    };\n\n    return Frame;\n\n  })();\n\n  Client = (function() {\n    var now;\n\n    function Client(ws) {\n      this.ws = ws;\n      this.ws.binaryType = \"arraybuffer\";\n      this.counter = 0;\n      this.connected = false;\n      this.heartbeat = {\n        outgoing: 10000,\n        incoming: 10000\n      };\n      this.maxWebSocketFrameSize = 16 * 1024;\n      this.subscriptions = {};\n      this.partialData = '';\n    }\n\n    Client.prototype.debug = function(message) {\n      var _ref;\n      return typeof window !== \"undefined\" && window !== null ? (_ref = window.console) != null ? _ref.log(message) : void 0 : void 0;\n    };\n\n    now = function() {\n      if (Date.now) {\n        return Date.now();\n      } else {\n        return new Date().valueOf;\n      }\n    };\n\n    Client.prototype._transmit = function(command, headers, body) {\n      var out;\n      out = Frame.marshall(command, headers, body);\n      if (typeof this.debug === \"function\") {\n        this.debug(\">>> \" + out);\n      }\n      while (true) {\n        if (out.length > this.maxWebSocketFrameSize) {\n          this.ws.send(out.substring(0, this.maxWebSocketFrameSize));\n          out = out.substring(this.maxWebSocketFrameSize);\n          if (typeof this.debug === \"function\") {\n            this.debug(\"remaining = \" + out.length);\n          }\n        } else {\n          return this.ws.send(out);\n        }\n      }\n    };\n\n    Client.prototype._setupHeartbeat = function(headers) {\n      var serverIncoming, serverOutgoing, ttl, v, _ref, _ref1;\n      if ((_ref = headers.version) !== Stomp.VERSIONS.V1_1 && _ref !== Stomp.VERSIONS.V1_2) {\n        return;\n      }\n      _ref1 = (function() {\n        var _i, _len, _ref1, _results;\n        _ref1 = headers['heart-beat'].split(\",\");\n        _results = [];\n        for (_i = 0, _len = _ref1.length; _i < _len; _i++) {\n          v = _ref1[_i];\n          _results.push(parseInt(v));\n        }\n        return _results;\n      })(), serverOutgoing = _ref1[0], serverIncoming = _ref1[1];\n      if (!(this.heartbeat.outgoing === 0 || serverIncoming === 0)) {\n        ttl = Math.max(this.heartbeat.outgoing, serverIncoming);\n        if (typeof this.debug === \"function\") {\n          this.debug(\"send PING every \" + ttl + \"ms\");\n        }\n        this.pinger = Stomp.setInterval(ttl, (function(_this) {\n          return function() {\n            _this.ws.send(Byte.LF);\n            return typeof _this.debug === \"function\" ? _this.debug(\">>> PING\") : void 0;\n          };\n        })(this));\n      }\n      if (!(this.heartbeat.incoming === 0 || serverOutgoing === 0)) {\n        ttl = Math.max(this.heartbeat.incoming, serverOutgoing);\n        if (typeof this.debug === \"function\") {\n          this.debug(\"check PONG every \" + ttl + \"ms\");\n        }\n        return this.ponger = Stomp.setInterval(ttl, (function(_this) {\n          return function() {\n            var delta;\n            delta = now() - _this.serverActivity;\n            if (delta > ttl * 2) {\n              if (typeof _this.debug === \"function\") {\n                _this.debug(\"did not receive server activity for the last \" + delta + \"ms\");\n              }\n              return _this.ws.close();\n            }\n          };\n        })(this));\n      }\n    };\n\n    Client.prototype._parseConnect = function() {\n      var args, connectCallback, errorCallback, headers;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      headers = {};\n      switch (args.length) {\n        case 2:\n          headers = args[0], connectCallback = args[1];\n          break;\n        case 3:\n          if (args[1] instanceof Function) {\n            headers = args[0], connectCallback = args[1], errorCallback = args[2];\n          } else {\n            headers.login = args[0], headers.passcode = args[1], connectCallback = args[2];\n          }\n          break;\n        case 4:\n          headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3];\n          break;\n        default:\n          headers.login = args[0], headers.passcode = args[1], connectCallback = args[2], errorCallback = args[3], headers.host = args[4];\n      }\n      return [headers, connectCallback, errorCallback];\n    };\n\n    Client.prototype.connect = function() {\n      var args, errorCallback, headers, out;\n      args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      out = this._parseConnect.apply(this, args);\n      headers = out[0], this.connectCallback = out[1], errorCallback = out[2];\n      if (typeof this.debug === \"function\") {\n        this.debug(\"Opening Web Socket...\");\n      }\n      this.ws.onmessage = (function(_this) {\n        return function(evt) {\n          var arr, c, client, data, frame, messageID, onreceive, subscription, unmarshalledData, _i, _len, _ref, _results;\n          data = typeof ArrayBuffer !== 'undefined' && evt.data instanceof ArrayBuffer ? (arr = new Uint8Array(evt.data), typeof _this.debug === \"function\" ? _this.debug(\"--- got data length: \" + arr.length) : void 0, ((function() {\n            var _i, _len, _results;\n            _results = [];\n            for (_i = 0, _len = arr.length; _i < _len; _i++) {\n              c = arr[_i];\n              _results.push(String.fromCharCode(c));\n            }\n            return _results;\n          })()).join('')) : evt.data;\n          _this.serverActivity = now();\n          if (data === Byte.LF) {\n            if (typeof _this.debug === \"function\") {\n              _this.debug(\"<<< PONG\");\n            }\n            return;\n          }\n          if (typeof _this.debug === \"function\") {\n            _this.debug(\"<<< \" + data);\n          }\n          unmarshalledData = Frame.unmarshall(_this.partialData + data);\n          _this.partialData = unmarshalledData.partial;\n          _ref = unmarshalledData.frames;\n          _results = [];\n          for (_i = 0, _len = _ref.length; _i < _len; _i++) {\n            frame = _ref[_i];\n            switch (frame.command) {\n              case \"CONNECTED\":\n                if (typeof _this.debug === \"function\") {\n                  _this.debug(\"connected to server \" + frame.headers.server);\n                }\n                _this.connected = true;\n                _this._setupHeartbeat(frame.headers);\n                _results.push(typeof _this.connectCallback === \"function\" ? _this.connectCallback(frame) : void 0);\n                break;\n              case \"MESSAGE\":\n                subscription = frame.headers.subscription;\n                onreceive = _this.subscriptions[subscription] || _this.onreceive;\n                if (onreceive) {\n                  client = _this;\n                  messageID = frame.headers[\"message-id\"];\n                  frame.ack = function(headers) {\n                    if (headers == null) {\n                      headers = {};\n                    }\n                    return client.ack(messageID, subscription, headers);\n                  };\n                  frame.nack = function(headers) {\n                    if (headers == null) {\n                      headers = {};\n                    }\n                    return client.nack(messageID, subscription, headers);\n                  };\n                  _results.push(onreceive(frame));\n                } else {\n                  _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled received MESSAGE: \" + frame) : void 0);\n                }\n                break;\n              case \"RECEIPT\":\n                _results.push(typeof _this.onreceipt === \"function\" ? _this.onreceipt(frame) : void 0);\n                break;\n              case \"ERROR\":\n                _results.push(typeof errorCallback === \"function\" ? errorCallback(frame) : void 0);\n                break;\n              default:\n                _results.push(typeof _this.debug === \"function\" ? _this.debug(\"Unhandled frame: \" + frame) : void 0);\n            }\n          }\n          return _results;\n        };\n      })(this);\n      this.ws.onclose = (function(_this) {\n        return function() {\n          var msg;\n          msg = \"Whoops! Lost connection to \" + _this.ws.url;\n          if (typeof _this.debug === \"function\") {\n            _this.debug(msg);\n          }\n          _this._cleanUp();\n          return typeof errorCallback === \"function\" ? errorCallback(msg) : void 0;\n        };\n      })(this);\n      return this.ws.onopen = (function(_this) {\n        return function() {\n          if (typeof _this.debug === \"function\") {\n            _this.debug('Web Socket Opened...');\n          }\n          headers[\"accept-version\"] = Stomp.VERSIONS.supportedVersions();\n          headers[\"heart-beat\"] = [_this.heartbeat.outgoing, _this.heartbeat.incoming].join(',');\n          return _this._transmit(\"CONNECT\", headers);\n        };\n      })(this);\n    };\n\n    Client.prototype.disconnect = function(disconnectCallback, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      this._transmit(\"DISCONNECT\", headers);\n      this.ws.onclose = null;\n      this.ws.close();\n      this._cleanUp();\n      return typeof disconnectCallback === \"function\" ? disconnectCallback() : void 0;\n    };\n\n    Client.prototype._cleanUp = function() {\n      this.connected = false;\n      if (this.pinger) {\n        Stomp.clearInterval(this.pinger);\n      }\n      if (this.ponger) {\n        return Stomp.clearInterval(this.ponger);\n      }\n    };\n\n    Client.prototype.send = function(destination, headers, body) {\n      if (headers == null) {\n        headers = {};\n      }\n      if (body == null) {\n        body = '';\n      }\n      headers.destination = destination;\n      return this._transmit(\"SEND\", headers, body);\n    };\n\n    Client.prototype.subscribe = function(destination, callback, headers) {\n      var client;\n      if (headers == null) {\n        headers = {};\n      }\n      if (!headers.id) {\n        headers.id = \"sub-\" + this.counter++;\n      }\n      headers.destination = destination;\n      this.subscriptions[headers.id] = callback;\n      this._transmit(\"SUBSCRIBE\", headers);\n      client = this;\n      return {\n        id: headers.id,\n        unsubscribe: function() {\n          return client.unsubscribe(headers.id);\n        }\n      };\n    };\n\n    Client.prototype.unsubscribe = function(id) {\n      delete this.subscriptions[id];\n      return this._transmit(\"UNSUBSCRIBE\", {\n        id: id\n      });\n    };\n\n    Client.prototype.begin = function(transaction) {\n      var client, txid;\n      txid = transaction || \"tx-\" + this.counter++;\n      this._transmit(\"BEGIN\", {\n        transaction: txid\n      });\n      client = this;\n      return {\n        id: txid,\n        commit: function() {\n          return client.commit(txid);\n        },\n        abort: function() {\n          return client.abort(txid);\n        }\n      };\n    };\n\n    Client.prototype.commit = function(transaction) {\n      return this._transmit(\"COMMIT\", {\n        transaction: transaction\n      });\n    };\n\n    Client.prototype.abort = function(transaction) {\n      return this._transmit(\"ABORT\", {\n        transaction: transaction\n      });\n    };\n\n    Client.prototype.ack = function(messageID, subscription, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      headers[\"message-id\"] = messageID;\n      headers.subscription = subscription;\n      return this._transmit(\"ACK\", headers);\n    };\n\n    Client.prototype.nack = function(messageID, subscription, headers) {\n      if (headers == null) {\n        headers = {};\n      }\n      headers[\"message-id\"] = messageID;\n      headers.subscription = subscription;\n      return this._transmit(\"NACK\", headers);\n    };\n\n    return Client;\n\n  })();\n\n  Stomp = {\n    VERSIONS: {\n      V1_0: '1.0',\n      V1_1: '1.1',\n      V1_2: '1.2',\n      supportedVersions: function() {\n        return '1.1,1.0';\n      }\n    },\n    client: function(url, protocols) {\n      var klass, ws;\n      if (protocols == null) {\n        protocols = ['v10.stomp', 'v11.stomp'];\n      }\n      klass = Stomp.WebSocketClass || WebSocket;\n      ws = new klass(url, protocols);\n      return new Client(ws);\n    },\n    over: function(ws) {\n      return new Client(ws);\n    },\n    Frame: Frame\n  };\n\n  if (typeof exports !== \"undefined\" && exports !== null) {\n    exports.Stomp = Stomp;\n  }\n\n  if (typeof window !== \"undefined\" && window !== null) {\n    Stomp.setInterval = function(interval, f) {\n      return window.setInterval(f, interval);\n    };\n    Stomp.clearInterval = function(id) {\n      return window.clearInterval(id);\n    };\n    window.Stomp = Stomp;\n  } else if (!exports) {\n    self.Stomp = Stomp;\n  }\n\n}).call(this);\n"]}